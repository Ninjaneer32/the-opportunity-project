{% assign kit = include.data %}
{% assign kit-id = kit.title | slugify %}
{% assign kit-href = site.baseurl | append: kit.url %}

<li class="usa-card tablet:grid-col-6 desktop:grid-col-4 data-kit__container">
  <div 
    class="data-kit__card z-100 {% unless kit.upcoming %}data-kit__active{% endunless %}" 
    style="background-image: url('{{ kit.image | relative_url }}')"
  >
    {% include 1px-transparent.html alt=kit.image-alt %}
    {% if kit.upcoming %}
      <h2 class="z-200 usa-link text-no-underline" id="{{kit-id}}">{{kit.title}}</h2>
    {% else %}
      <a href="{{ kit-href }}">
        <h2 class="z-200 usa-link" id="{{kit-id}}">{{kit.title}}</h2>
      </a>
    {% endif %}
    <p class="z-200">{{kit.lead}}</p>
    {% unless kit.upcoming %}
      <img class="data-kit__arrow" src="{{site.baseurl}}/assets/img/icons/right-arrow.svg" alt="Right Arrow" />
    {% endunless %}
  </div>
  <div class="data-kit__bg">
    {% if kit.upcoming %}
    <div class="data-kit__upcoming">
      Coming Soon
    </div>
    {% else %}
    <div class="data-kit__stats">
      <a href="{{ kit-href }}">
        <img class="data-kit__icon-items" src="{{site.baseurl}}/assets/img/icons/items.svg" alt=""/>
        {% assign sprint = site.data.sprints | where: "Name", kit.sprint-name | first %}
        {% assign data = site.data.datasets | where: "sprint", sprint.airtable_id %}
        {% if kit.problem-statement-name == "Analyzing Equity in Federal COVID-19 Spending" %}
          {% assign data = site.data.treasury_datasets %}
        {% endif %}
        {% assign data = data | where_exp: "item", "item.link != empty and item.link != nil" %}
        {% assign data = data | where_exp: "item", "item.hideFromSite != true" %}
        <p class="text-ink">{{ data | size }}<span class="usa-sr-only"> datasets</span></p>
      </a>
    </div>
    {% endif %}
  </div>
</li>