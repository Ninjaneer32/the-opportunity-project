{% assign data-topics = include.data %}
{% assign checkboxSets = include.checkboxSets %}
{% if data-topics.size > 1 %}
<div class="">
  <div class="grid-row grid-gap">
    <ul class="data-card-group margin-top-7">
      {% for data in data-topics %}
        {% assign filter = data.Name | slugify | default: data %}
        <li>
          <div 
            id="{{ filter | slugify }}" 
            class="dch__data-topic {%if forloop.first %}selected{% endif %}"
          >
            <header class="padding-x-2">
              <p class="text-white font-sans-sm" value="{{ filter | downcase }}">{{ data.Name | default: filter | camelcase }}</p>
            </header>
          </div>
        </li>
      {% endfor %}
    </ul>
  </div>

  {% if checkboxSets %}
  <div class="grid-row grid-gap text-white">
    {% for group in checkboxSets %}
      <fieldset class="usa-form dch__checkbox-group" name="{{group}}">
        <legend class="usa-legend">{{group}}</legend>
        {% comment %} get all options for the given field {% endcomment %}
        {% assign options = "" | split: ',' %}
        {% for dataset in site.data.treasury_datasets %}
          {% for option in dataset[group] %}
            {% assign options = options | push: option %}
          {% endfor %}
        {% endfor %}
        {% assign options = options | uniq | sort %}
        {% for option in options %}
        <div class="usa-checkbox dch-checkbox">
            <input
              class="usa-checkbox__input"
              id="{{option | slugify}}"
              type="checkbox"
              name="{{group | slugify}}"
              value="{{option | slugify}}"
            />
            <label class="usa-checkbox__label" for="{{option | slugify}}">
              {{ option }}
            </label>
        </div>
        {% endfor %}
      </fieldset>
      <br/>
    {% endfor %}
  </div>
  {% endif %}

</div>
{% endif %}
